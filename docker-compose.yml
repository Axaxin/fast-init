version: '3'
services:

  nginx-proxy-manager:
    image: 'jc21/nginx-proxy-manager:latest'
    container_name: npm
    restart: unless-stopped
    ports:
      - '80:80'
      - '443:443'
      - '81:81'
    volumes:
      - ./npm/data:/data
      - ./npm/letsencrypt:/etc/letsencrypt
    networks:
      - default
      - spack

  portainer-ce:
    image: 'portainer/portainer-ce'
    container_name: portainer
    privileged: true
    volumes:
      - ./portainer/data:/data
      - /var/run/docker.sock:/var/run/docker.sock
    restart: unless-stopped
  
  monitor:
    image: antonyleons/ward
    restart: unless-stopped
    container_name: ward
    #ports:
      #- '4000:4000'
    environment:
      - WARD_PORT=4000
      - WARD_THEME=light
      - WARD_NAME=server-monitor
    privileged: true
    networks:
      - default
  
  browser:
    container_name: filebrowser
    restart: unless-stopped
    volumes:
      - '/root:/srv'
      - './filebrowser/filebrowser.db:/database.db'
      - './filebrowser/.filebrowser.json:/.filebrowser.json'
    image: filebrowser/filebrowser
      
  

networks:
  default:
    external: 
      name: web.io
  
  spack:
    external:
      name: spack.io
